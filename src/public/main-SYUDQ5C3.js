import{a as q}from"./chunk-UV2D7LCB.js";import{a as z,b as Z,c as C,f as Q}from"./chunk-C7IKX3R3.js";import{a as d,b as E}from"./chunk-UFO7NE4L.js";import{a as ee}from"./chunk-3YNTNXFH.js";import{s as V,u as Y,v as G,w as J,x as X}from"./chunk-OSBDGBC6.js";import{G as l,Ha as x,J as h,K as _,M as D,P as L,Pa as W,R as O,Ra as A,S as p,T as j,ab as $,c as M,ca as F,f as y,ga as H,k as v,n as b,u as m,v as R,vb as B,w as I,wb as K,xb as k,z as f}from"./chunk-O23KAMPK.js";import{a as U}from"./chunk-2NFLSA4Y.js";var te=()=>{let e=p(q),o=p(C);return e.isLoggedIn()?o.parseUrl("/admin"):o.parseUrl("/auth")};var re=[{path:"auth",loadComponent:()=>import("./chunk-MAP6CM4N.js"),loadChildren:()=>import("./chunk-ZW2OU5FP.js").then(e=>e.AUTH_ROUTES)},{path:"admin",loadComponent:()=>import("./chunk-6KNBS3QD.js"),loadChildren:()=>import("./chunk-PHDMOUI6.js").then(e=>e.ADMIN_ROUTES)},{path:"",loadComponent:()=>import("./chunk-GFS7TQFZ.js"),canActivate:[te],pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}];var oe=re;var ne=(e,o)=>{if(e.url.includes("/api/v1/auth/login")||e.headers.has("Authorization"))return o(e);let n=localStorage.getItem(d);if(!n)return o(e);let t=e.clone({headers:e.headers.set("Authorization",`Bearer ${n}`)});return o(t)};var ie=(e,o)=>{let r=p(Y),n=new G(r),t=`${ee.apiUrl}/api/v1/auth/refresh`,s=p(C);return o(e).pipe(I(i=>{if(i.status!==401)return v(()=>i);if(e.url===t||e.headers.get("x-refresh-retried"))return localStorage.removeItem(d),localStorage.removeItem(E),v(()=>i);let c=localStorage.getItem(E);return c?n.post(t,{refreshToken:c}).pipe(l(a=>{localStorage.setItem(d,a.accessToken),localStorage.setItem(E,a.refreshToken);let u=e.clone({setHeaders:{Authorization:`Bearer ${a.accessToken}`,"x-refresh-retried":"true"}});return o(u)}),I(a=>(localStorage.removeItem(d),localStorage.removeItem(E),s.navigate(["/auth"]),v(()=>a)))):(localStorage.removeItem(d),v(()=>i))}))};var N="Service workers are disabled or not supported by this browser",g=class{serviceWorker;worker;registration;events;constructor(o,r){if(this.serviceWorker=o,!o)this.worker=this.events=this.registration=new M(n=>n.error(new h(5601,!1)));else{let n=null,t=new y;this.worker=new M(u=>(n!==null&&u.next(n),t.subscribe(S=>u.next(S))));let s=()=>{let{controller:u}=o;u!==null&&(n=u,t.next(n))};o.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(l(()=>o.getRegistration()));let i=new y;this.events=i.asObservable();let c=u=>{let{data:S}=u;S?.type&&i.next(S)};o.addEventListener("message",c),r?.get(A,null,{optional:!0})?.onDestroy(()=>{o.removeEventListener("controllerchange",s),o.removeEventListener("message",c)})}}postMessage(o,r){return new Promise(n=>{this.worker.pipe(f(1)).subscribe(t=>{t.postMessage(U({action:o},r)),n()})})}postMessageWithOperation(o,r,n){let t=this.waitForOperationCompleted(n),s=this.postMessage(o,r);return Promise.all([s,t]).then(([,i])=>i)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(o){let r;return typeof o=="string"?r=n=>n.type===o:r=n=>o.includes(n.type),this.events.pipe(R(r))}nextEventOfType(o){return this.eventsOfType(o).pipe(f(1))}waitForOperationCompleted(o){return new Promise((r,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(R(t=>t.nonce===o),f(1),b(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).subscribe({next:r,error:n})})}get isEnabled(){return!!this.serviceWorker}},le=(()=>{class e{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new y;constructor(r){if(this.sw=r,!r.isEnabled){this.messages=m,this.notificationClicks=m,this.subscription=m;return}this.messages=this.sw.eventsOfType("PUSH").pipe(b(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(b(t=>t.data)),this.pushManager=this.sw.registration.pipe(b(t=>t.pushManager));let n=this.pushManager.pipe(l(t=>t.getSubscription()));this.subscription=new M(t=>{let s=n.subscribe(t),i=this.subscriptionChanges.subscribe(t);return()=>{s.unsubscribe(),i.unsubscribe()}})}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(N));let n={userVisibleOnly:!0},t=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return n.applicationServerKey=s,new Promise((i,c)=>{this.pushManager.pipe(l(a=>a.subscribe(n)),f(1)).subscribe({next:a=>{this.subscriptionChanges.next(a),i(a)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(N));let r=n=>{if(n===null)throw new h(5602,!1);return n.unsubscribe().then(t=>{if(!t)throw new h(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,t)=>{this.subscription.pipe(f(1),l(r)).subscribe({next:n,error:t})})}decodeBase64(r){return atob(r)}static \u0275fac=function(n){return new(n||e)(O(g))};static \u0275prov=D({token:e,factory:e.\u0275fac})}return e})(),de=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=m,this.unrecoverable=m;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(N));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new h(5601,!1));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}static \u0275fac=function(n){return new(n||e)(O(g))};static \u0275prov=D({token:e,factory:e.\u0275fac})}return e})();var ae=new L("");function me(){let e=p(w);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let o=p(ae),r=p(H),n=p(A);r.runOutsideAngular(()=>{let t=navigator.serviceWorker,s=()=>t.controller?.postMessage({action:"INITIALIZE"});t.addEventListener("controllerchange",s),n.onDestroy(()=>{t.removeEventListener("controllerchange",s)})}),r.runOutsideAngular(()=>{let t,{registrationStrategy:s}=e;if(typeof s=="function")t=new Promise(i=>s().subscribe(()=>i()));else{let[i,...c]=(s||"registerWhenStable:30000").split(":");switch(i){case"registerImmediately":t=Promise.resolve();break;case"registerWithDelay":t=se(+c[0]||0);break;case"registerWhenStable":t=Promise.race([n.whenStable(),se(+c[0])]);break;default:throw new h(5600,!1)}}t.then(()=>{n.destroyed||navigator.serviceWorker.register(o,{scope:e.scope}).catch(i=>console.error(_(5604,!1)))})})}function se(e){return new Promise(o=>setTimeout(o,e))}function fe(e,o){return new g(e.enabled!==!1?navigator.serviceWorker:void 0,o)}var w=class{enabled;scope;registrationStrategy};function P(e,o={}){return j([le,de,{provide:ae,useValue:e},{provide:w,useValue:o},{provide:g,useFactory:fe,deps:[w,F]},W(me)])}var pe={providers:[B(),Q(oe),J(X([ne,ie])),{provide:K,useValue:"es-ES"},P("ngsw-worker.js",{enabled:!k(),registrationStrategy:"registerWhenStable:30000"}),P("ngsw-worker.js",{enabled:!k(),registrationStrategy:"registerWhenStable:30000"})]};var T=class e{title="fichas-frontend-2.0";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=x({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,n){r&1&&$(0,"router-outlet")},dependencies:[Z],encapsulation:2})};function he(e){let o=e,r=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length,t=parseInt(e.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return o===1?1:t===0&&r!==0&&r%1e6===0&&n===0||!(t>=0&&t<=5)?4:5}var ce=["es",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",he];V(ce);z(T,pe).catch(e=>console.error(e));
