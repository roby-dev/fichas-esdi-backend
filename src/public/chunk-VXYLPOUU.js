import{a as G}from"./chunk-5TNNU5FG.js";import{c as D,d as R}from"./chunk-O44J2HJB.js";import{a as I,b as c,c as M,d as j,e as q,f as z,g as V,m as A,n as B}from"./chunk-QWVXAMFY.js";import"./chunk-UFO7NE4L.js";import{a as H}from"./chunk-3YNTNXFH.js";import{j as T,n as k,v as N}from"./chunk-MXHFB5TN.js";import{J as S,Ja as L,N as y,Oa as d,T as m,Va as u,Ya as s,aa as C,ab as n,ba as v,bb as i,cb as p,hb as F,ib as f,j as w,mb as a,na as b,nb as E,sb as h,w as _,za as l}from"./chunk-CQFPMLQ5.js";import"./chunk-Q7L6LLAK.js";var g=class e{http=m(N);baseUrl=`${H.apiUrl}/api/v1/auth`;login(r){return this.http.post(`${this.baseUrl}/login`,r)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var O=e=>({"border-red-500":e});function $(e,r){if(e&1&&(n(0,"div",1)(1,"div",16)(2,"div",17),C(),n(3,"svg",18),p(4,"path",19),i()(),v(),n(5,"div",20)(6,"p",21),a(7),i()()()()),e&2){let t=f();l(7),E(t.error())}}function P(e,r){e&1&&(n(0,"span"),a(1,"Correo electr\xF3nico es obligatorio"),i())}function J(e,r){e&1&&(n(0,"span"),a(1,"Ingrese un correo electr\xF3nico v\xE1lido"),i())}function K(e,r){if(e&1&&(n(0,"div",6),d(1,P,2,0,"span")(2,J,2,0,"span"),i()),e&2){let t=f();l(),s(!(t.emailControl==null||t.emailControl.errors==null)&&t.emailControl.errors.required?1:-1),l(),s(!(t.emailControl==null||t.emailControl.errors==null)&&t.emailControl.errors.email?2:-1)}}function Q(e,r){e&1&&(n(0,"span"),a(1,"La contrase\xF1a es obligatoria"),i())}function W(e,r){e&1&&(n(0,"span"),a(1,"La contrase\xF1a debe de tener un m\xEDnimo de 6 d\xEDgitos"),i())}function X(e,r){if(e&1&&(n(0,"div",6),d(1,Q,2,0,"span")(2,W,2,0,"span"),i()),e&2){let t=f();l(),s(!(t.passwordControl==null||t.passwordControl.errors==null)&&t.passwordControl.errors.required?1:-1),l(),s(!(t.passwordControl==null||t.passwordControl.errors==null)&&t.passwordControl.errors.minlength?2:-1)}}function Y(e,r){e&1&&(n(0,"span"),a(1," Ingresar"),i())}function Z(e,r){e&1&&(n(0,"div",12),C(),n(1,"svg",22),p(2,"circle",23)(3,"path",24),i(),v(),n(4,"span"),a(5,"Guardando..."),i()())}var x=class e{authService=m(G);router=m(D);fb=m(A);authorizationService=m(g);loginForm;isLoading=b(!1);error=b("");constructor(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]})}ngOnInit(){}onSubmit(){this.loginForm.invalid||(this.isLoading.set(!0),this.error.set(""),this.authorizationService.login(this.loginForm.value).pipe(S(r=>{this.authService.setTokens(r.accessToken,r.refreshToken),this.isLoading.set(!1)}),_(r=>(this.error.set(r.message),w(null)))).subscribe({next:()=>{this.isLoading.set(!1),this.router.navigate(["/dashboard"])},error:()=>{this.isLoading.set(!1)}}))}get emailControl(){return this.loginForm.get("email")}get passwordControl(){return this.loginForm.get("password")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=L({type:e,selectors:[["login"]],decls:24,vars:12,consts:[[1,"text-2xl","font-bold","text-gray-900","mb-6"],[1,"bg-red-50","border-l-4","border-red-500","p-4","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","type","email","formControlName","email",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],[1,"mt-1","text-xs","text-red-500"],[1,"mb-6"],[1,"flex","items-center","justify-between","mb-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","type","password","formControlName","password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],["type","submit",1,"w-full","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50",3,"disabled"],[1,"flex","justify-center","items-center"],[1,"mt-5","text-center"],[1,"text-sm","text-gray-600"],["routerLink","/auth/register",1,"text-sm","font-medium","text-blue-600","hover:text-blue-500"],[1,"flex"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"h-5","w-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"ml-3"],[1,"text-sm","text-red-700"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,o){t&1&&(n(0,"div")(1,"h2",0),a(2,"Ingresa"),i(),d(3,$,8,1,"div",1),n(4,"form",2),F("ngSubmit",function(){return o.onSubmit()}),n(5,"div",3)(6,"label",4),a(7,"Correo electr\xF3nico"),i(),p(8,"input",5),d(9,K,3,2,"div",6),i(),n(10,"div",7)(11,"div",8)(12,"label",9),a(13,"Contrase\xF1a"),i()(),p(14,"input",10),d(15,X,3,2,"div",6),i(),n(16,"button",11),d(17,Y,2,0,"span")(18,Z,6,0,"div",12),i()(),n(19,"div",13)(20,"p",14),a(21," \xBFNo tienes una cuenta? "),i(),n(22,"a",15),a(23,"Reg\xEDstrate aqui"),i()()()),t&2&&(l(3),s(o.error()?3:-1),l(),u("formGroup",o.loginForm),l(4),u("ngClass",h(8,O,(o.emailControl==null?null:o.emailControl.invalid)&&(o.emailControl==null?null:o.emailControl.touched))),l(),s(o.emailControl!=null&&o.emailControl.invalid&&(o.emailControl!=null&&o.emailControl.touched)?9:-1),l(5),u("ngClass",h(10,O,(o.passwordControl==null?null:o.passwordControl.invalid)&&(o.passwordControl==null?null:o.passwordControl.touched))),l(),s(o.passwordControl!=null&&o.passwordControl.invalid&&(o.passwordControl!=null&&o.passwordControl.touched)?15:-1),l(),u("disabled",o.loginForm.invalid||o.isLoading()),l(),s(o.isLoading()?18:17))},dependencies:[k,T,B,q,I,M,j,z,V,R],encapsulation:2,changeDetection:0})};export{x as default};
