import{a as ie,b as oe}from"./chunk-Z4WAXMB3.js";import{a as z}from"./chunk-5TNNU5FG.js";import{c as H}from"./chunk-O44J2HJB.js";import{a as B,b as D,c as J,d as K,e as Q,f as W,g as X,m as Y,n as Z}from"./chunk-QWVXAMFY.js";import{a as ee}from"./chunk-QSNGYTAQ.js";import{b as te}from"./chunk-LUUIMHHG.js";import{b as F}from"./chunk-WROVPCJX.js";import"./chunk-UFO7NE4L.js";import"./chunk-3YNTNXFH.js";import{j as O,l as P,n as S}from"./chunk-MXHFB5TN.js";import{$ as g,$a as E,H as j,Ja as _,Oa as p,T as s,Va as u,Ya as v,_ as x,_a as h,aa as G,ab as i,ba as R,bb as n,cb as C,db as w,hb as d,ib as f,ka as U,la as A,mb as r,na as I,nb as b,ob as y,sb as $,t as L,za as a}from"./chunk-CQFPMLQ5.js";import"./chunk-Q7L6LLAK.js";var re=t=>({"bg-blue-500 text-white font-semibold":t}),ae=(t,o)=>o.id;function le(t,o){t&1&&(i(0,"span",4),r(1," (Seleccionado)"),n())}function se(t,o){if(t&1){let e=w();i(0,"li",3),d("click",function(){let l=x(e).$implicit,c=f();return g(c.selectCommittee(l))}),r(1),p(2,le,2,0,"span",4),n()}if(t&2){let e=o.$implicit,m=f();u("ngClass",$(3,re,m.committeeState.committee()&&m.committeeState.committee().id===e.id)),a(),y(" ",e.name," "),a(),v(m.committeeState.committee()&&m.committeeState.committee().id===e.id?2:-1)}}function de(t,o){t&1&&(i(0,"li"),r(1,"No hay comit\xE9s disponibles."),n())}var k=class t{router=s(H);committeeState=s(F);communityHallState=s(ee);childrenState=s(te);selectCommittee(o){this.committeeState.setCommittee(o),L([this.communityHallState.loadCommunityHalls(),this.childrenState.loadChildren()]).subscribe(),this.router.navigate(["/admin/dashboard"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-user-committees"]],decls:6,vars:1,consts:[[1,"text-lg","font-semibold","mb-4"],[1,"space-y-2"],[1,"cursor-pointer","px-4","py-2","rounded-lg","border","transition",3,"ngClass"],[1,"cursor-pointer","px-4","py-2","rounded-lg","border","transition",3,"click","ngClass"],[1,"text-sm","text-white"]],template:function(e,m){e&1&&(i(0,"h2",0),r(1,"Seleccione Comit\xE9"),n(),i(2,"ul",1),h(3,se,3,5,"li",2,ae,!1,de,2,0,"li"),n()),e&2&&(a(3),E(m.committeeState.userCommittees()))},dependencies:[S,O],encapsulation:2,changeDetection:0})};function ce(t,o){t&1&&(i(0,"div",7),r(1," ID requerido "),n())}function pe(t,o){t&1&&(i(0,"div",7),r(1," Nombre requerido "),n())}var M=class t{fb=s(Y);isLoading=A.required();committee=A(null);saveComitteeEvent=U();form;ngOnInit(){this.initForm();let o=this.committee();o&&this.form.patchValue({committeeId:o.committeeId??"",name:o.name??""})}initForm(){this.form=this.fb.group({committeeId:["",[D.required]],name:["",D.required]})}onSubmit(){if(this.form.invalid)return;let o=this.form.value,e={committeeId:o.committeeId??"",name:o.name??""};this.saveComitteeEvent.emit(e)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-committee-form"]],inputs:{isLoading:[1,"isLoading"],committee:[1,"committee"]},outputs:{saveComitteeEvent:"saveComitteeEvent"},decls:15,vars:6,consts:[[1,"space-y-4","p-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","formControlName","committeeId",1,"mt-1","block","w-full","rounded-lg","border","border-gray-300","px-3","py-2","text-sm","focus:border-blue-500","focus:ring-blue-500"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["type","text","formControlName","name",1,"mt-1","block","w-full","rounded-lg","border","border-gray-300","px-3","py-2","text-sm","focus:border-blue-500","focus:ring-blue-500"],[1,"flex","justify-end"],["type","submit",1,"rounded-lg","bg-blue-600","px-4","py-2","text-white","text-sm","font-medium","hover:bg-blue-700","disabled:opacity-50",3,"disabled"],[1,"text-red-500","text-xs","mt-1"]],template:function(e,m){if(e&1&&(i(0,"form",0),d("ngSubmit",function(){return m.onSubmit()}),i(1,"div")(2,"label",1),r(3,"ID Comit\xE9"),n(),C(4,"input",2),p(5,ce,2,0,"div",3),n(),i(6,"div")(7,"div")(8,"label",1),r(9,"Nombre Comit\xE9"),n(),C(10,"input",4),p(11,pe,2,0,"div",3),n()(),i(12,"div",5)(13,"button",6),r(14),n()()()),e&2){let l,c;u("formGroup",m.form),a(5),u("ngIf",((l=m.form.get("committeeId"))==null?null:l.touched)&&((l=m.form.get("committeeId"))==null?null:l.invalid)),a(6),u("ngIf",((c=m.form.get("name"))==null?null:c.touched)&&((c=m.form.get("name"))==null?null:c.invalid)),a(2),u("disabled",m.isLoading())("disabled",m.form.invalid),a(),y(" ",m.isLoading()?"Guardando...":"Guardar"," ")}},dependencies:[S,P,Z,Q,B,J,K,W,X],encapsulation:2,changeDetection:0})};var ne=(t,o)=>o.id;function ue(t,o){if(t&1){let e=w();i(0,"tr",14),d("click",function(){let l=x(e).$implicit,c=f();return g(c.onSelectedCommittee(l))}),i(1,"td",15),r(2),n(),i(3,"td",15),r(4),n()()}if(t&2){let e=o.$implicit;a(2),b(e.committeeId),a(2),b(e.name)}}function Ce(t,o){t&1&&(i(0,"tr")(1,"td",16),r(2,"No hay comit\xE9s registrados"),n()())}function fe(t,o){if(t&1&&(i(0,"tr",12)(1,"td",15),r(2),n(),i(3,"td",15),r(4),n(),i(5,"td",15),r(6),n()()),t&2){let e=o.$implicit;a(2),b(e.committeeId),a(2),b(e.name),a(2),b(e.user==null?null:e.user.email)}}function xe(t,o){t&1&&(i(0,"tr")(1,"td",16),r(2,"No hay comit\xE9s asignados"),n()())}function ge(t,o){if(t&1){let e=w();i(0,"div",13)(1,"div",17),d("click",function(){x(e);let l=f();return g(l.closeModal())}),n(),i(2,"div",18),d("click",function(l){return x(e),g(l.stopPropagation())}),i(3,"div",19)(4,"h3",20),r(5),n(),i(6,"button",21),d("click",function(){x(e);let l=f();return g(l.closeModal())}),i(7,"span",22),r(8,"Cerrar"),n(),G(),i(9,"svg",23),C(10,"path",24),n()()(),R(),i(11,"div",25)(12,"app-committee-form",26),d("saveComitteeEvent",function(l){x(e);let c=f();return g(c.onCommitteeSaved(l))}),n()()()()}if(t&2){let e=f();a(5),y(" ",e.selectedComittee()?"Editar comit\xE9":"Agregar comit\xE9"," "),a(7),u("committee",e.selectedComittee())("isLoading",e.isLoading())}}var T=class t{adminComitteesService=s(ie);committeeState=s(F);adminCommitteeState=s(oe);selectedComittee=I(null);isModalOpen=I(!1);isLoading=I(!1);openModal(){this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.selectedComittee.set(null)}onSelectedCommittee(o){this.selectedComittee.set(o),this.openModal()}onCommitteeSaved(o){this.isLoading.set(!0),(this.selectedComittee()?this.adminComitteesService.updateCommittee(this.selectedComittee().id,o):this.adminComitteesService.createCommittee(o)).pipe(j(()=>this.adminCommitteeState.loadCommitteees())).subscribe({next:()=>{this.isLoading.set(!1),this.closeModal()},error:m=>{this.isLoading.set(!1),console.error(m)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-admin-committees"]],decls:37,vars:3,consts:[[1,"text-lg","font-semibold","mb-4"],[1,"flex","flex-row","justify-between","items-center","mb-4"],[1,"text-base","font-semibold"],[1,"rounded-lg","bg-blue-600","px-4","py-2","text-white","text-sm","font-medium","hover:bg-blue-700","disabled:opacity-50",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","border","rounded-lg"],[1,"bg-gray-50"],[1,"px-4","py-2","text-left","text-sm","font-medium","text-gray-600"],[1,"divide-y","divide-gray-100"],[1,"hover:bg-gray-50","transition-colors","cursor-pointer"],[1,"my-10","text-gray-500"],[1,"text-base","font-semibold","mb-4"],[1,"hover:bg-gray-50","transition-colors"],["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","flex","items-center","justify-center"],[1,"hover:bg-gray-50","transition-colors","cursor-pointer",3,"click"],[1,"px-4","py-2","text-sm","text-gray-800"],["colspan","2",1,"px-4","py-2","text-sm","text-gray-800"],["aria-hidden","true",1,"absolute","inset-0","bg-black/40",3,"click"],[1,"relative","z-10","w-full","max-w-3xl","mx-4","md:mx-0","bg-white","rounded-lg","shadow-lg","overflow-hidden",3,"click"],[1,"flex","items-center","justify-between","px-4","py-3","border-b"],["id","modal-title",1,"text-lg","font-medium","text-gray-900"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"sr-only"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-1"],[3,"saveComitteeEvent","committee","isLoading"]],template:function(e,m){e&1&&(i(0,"h2",0),r(1,"Administraci\xF3n de comit\xE9s"),n(),i(2,"div",1)(3,"h3",2),r(4,"Comit\xE9s creados"),n(),i(5,"button",3),d("click",function(){return m.openModal()}),r(6," Agregar comit\xE9 "),n()(),i(7,"div",4)(8,"table",5)(9,"thead",6)(10,"tr")(11,"th",7),r(12,"ID"),n(),i(13,"th",7),r(14,"Nombre"),n()()(),i(15,"tbody",8),h(16,ue,5,2,"tr",9,ne,!1,Ce,3,0,"tr"),n()()(),C(19,"hr",10),i(20,"h3",11),r(21,"Comit\xE9s asignados"),n(),i(22,"div",4)(23,"table",5)(24,"thead",6)(25,"tr")(26,"th",7),r(27,"ID"),n(),i(28,"th",7),r(29,"Nombre"),n(),i(30,"th",7),r(31,"Usuario"),n()()(),i(32,"tbody",8),h(33,fe,7,3,"tr",12,ne,!1,xe,3,0,"tr"),n()()(),p(36,ge,13,3,"div",13)),e&2&&(a(16),E(m.adminCommitteeState.committees()),a(17),E(m.committeeState.adminCommittees()),a(3),v(m.isModalOpen()?36:-1))},dependencies:[S,M],encapsulation:2,changeDetection:0})};function _e(t,o){t&1&&C(0,"app-user-committees")}function ve(t,o){t&1&&C(0,"app-admin-committees")}var q=class t{authService=s(z);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-committee"]],decls:3,vars:1,consts:[[1,"p-0","sm:p-4"]],template:function(e,m){e&1&&(i(0,"div",0),p(1,_e,1,0,"app-user-committees")(2,ve,1,0,"app-admin-committees"),n()),e&2&&(a(),v(m.authService.isAdmin()?2:1))},dependencies:[k,T],encapsulation:2,changeDetection:0})};export{q as default};
