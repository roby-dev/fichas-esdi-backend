import{c as k,d as D}from"./chunk-NDLMWJ3S.js";import{a as N,b as c,c as V,d as q,e as G,f as I,g as M,m as j,n as B}from"./chunk-ZH2IFAXL.js";import{a as H}from"./chunk-3YNTNXFH.js";import{j as L,n as T,u as U}from"./chunk-D7KOQTBE.js";import{$a as E,Fa as y,K as h,Ka as s,Q as m,Ra as u,Ua as a,W as w,X as S,Y as g,Ya as n,Z as x,Za as i,_a as p,db as F,eb as d,ib as r,ja as C,jb as R,ob as _,va as l}from"./chunk-O3UI23AV.js";import"./chunk-2NFLSA4Y.js";var f=class t{http=m(U);baseUrl=`${H.apiUrl}/api/v1/users`;createUser(o){return this.http.post(`${this.baseUrl}`,o)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};var z=t=>({"border-red-500":t});function $(t,o){if(t&1&&(n(0,"div",1)(1,"div",16)(2,"div",17),g(),n(3,"svg",18),p(4,"path",19),i()(),x(),n(5,"div",20)(6,"p",21),r(7),i()()()()),t&2){let e=d(2);l(7),R(e.error())}}function P(t,o){t&1&&(n(0,"span"),r(1,"Correo electr\xF3nico es obligatorio"),i())}function Y(t,o){t&1&&(n(0,"span"),r(1,"Ingrese un correo electr\xF3nico v\xE1lido"),i())}function J(t,o){if(t&1&&(n(0,"div",6),s(1,P,2,0,"span")(2,Y,2,0,"span"),i()),t&2){let e=d(2);l(),a(!(e.emailControl==null||e.emailControl.errors==null)&&e.emailControl.errors.required?1:-1),l(),a(!(e.emailControl==null||e.emailControl.errors==null)&&e.emailControl.errors.email?2:-1)}}function K(t,o){t&1&&(n(0,"span"),r(1,"La contrase\xF1a es obligatoria"),i())}function Q(t,o){t&1&&(n(0,"span"),r(1,"La contrase\xF1a debe de tener un m\xEDnimo de 6 d\xEDgitos"),i())}function W(t,o){if(t&1&&(n(0,"div",6),s(1,K,2,0,"span")(2,Q,2,0,"span"),i()),t&2){let e=d(2);l(),a(!(e.passwordControl==null||e.passwordControl.errors==null)&&e.passwordControl.errors.required?1:-1),l(),a(!(e.passwordControl==null||e.passwordControl.errors==null)&&e.passwordControl.errors.minlength?2:-1)}}function X(t,o){t&1&&(n(0,"span"),r(1," Registrar"),i())}function Z(t,o){t&1&&(n(0,"div",12),g(),n(1,"svg",22),p(2,"circle",23)(3,"path",24),i(),x(),n(4,"span"),r(5,"Ingresando..."),i()())}function ee(t,o){if(t&1){let e=E();n(0,"h2",0),r(1,"Reg\xEDstrate"),i(),s(2,$,8,1,"div",1),n(3,"form",2),F("ngSubmit",function(){w(e);let A=d();return S(A.onSubmit())}),n(4,"div",3)(5,"label",4),r(6,"Correo electr\xF3nico"),i(),p(7,"input",5),s(8,J,3,2,"div",6),i(),n(9,"div",7)(10,"div",8)(11,"label",9),r(12,"Contrase\xF1a"),i()(),p(13,"input",10),s(14,W,3,2,"div",6),i(),n(15,"button",11),s(16,X,2,0,"span")(17,Z,6,0,"div",12),i()(),n(18,"div",13)(19,"p",14),r(20," \xBFYa tienes una cuenta? "),i(),n(21,"a",15),r(22,"Ingresa aqui"),i()()}if(t&2){let e=d();l(2),a(e.error()?2:-1),l(),u("formGroup",e.registerForm),l(4),u("ngClass",_(8,z,(e.emailControl==null?null:e.emailControl.invalid)&&(e.emailControl==null?null:e.emailControl.touched))),l(),a(e.emailControl!=null&&e.emailControl.invalid&&(e.emailControl!=null&&e.emailControl.touched)?8:-1),l(5),u("ngClass",_(10,z,(e.passwordControl==null?null:e.passwordControl.invalid)&&(e.passwordControl==null?null:e.passwordControl.touched))),l(),a(e.passwordControl!=null&&e.passwordControl.invalid&&(e.passwordControl!=null&&e.passwordControl.touched)?14:-1),l(),u("disabled",e.registerForm.invalid||e.isLoading()),l(),a(e.isLoading()?17:16)}}function te(t,o){t&1&&(n(0,"p",25),r(1,"Felicitaciones, su usuario fue creado."),i(),n(2,"p",26),r(3,"Ahora puedes ingresar con tu correo y contrase\xF1a "),n(4,"a",27),r(5,"desde aqu\xED."),i()())}var v=class t{userService=m(f);router=m(k);fb=m(j);registerForm;isLoading=C(!1);error=C("");isUserCreated=C(!1);constructor(){this.registerForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]})}onSubmit(){this.registerForm.invalid||(this.isLoading.set(!0),this.error.set(""),this.userService.createUser(this.registerForm.value).subscribe({next:()=>{this.isLoading.set(!1),this.isUserCreated.set(!0)},error:o=>{this.error.set(o.message),this.isLoading.set(!1)}}))}get emailControl(){return this.registerForm.get("email")}get passwordControl(){return this.registerForm.get("password")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-register"]],decls:3,vars:1,consts:[[1,"text-2xl","font-bold","text-gray-900","mb-6"],[1,"bg-red-50","border-l-4","border-red-500","p-4","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","type","email","formControlName","email",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],[1,"mt-1","text-xs","text-red-500"],[1,"mb-6"],[1,"flex","items-center","justify-between","mb-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","type","password","formControlName","password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],["type","submit",1,"w-full","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50",3,"disabled"],[1,"flex","justify-center","items-center"],[1,"mt-5","text-center"],[1,"text-sm","text-gray-600"],["routerLink","/auth/login",1,"text-sm","font-medium","text-blue-600","hover:text-blue-500"],[1,"flex"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"h-5","w-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"ml-3"],[1,"text-sm","text-red-700"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"font-bold"],[1,"mt-3"],["routerLink","/auth/login",1,"font-medium","text-blue-600","hover:text-blue-500"]],template:function(e,b){e&1&&(n(0,"div"),s(1,ee,23,12)(2,te,6,0),i()),e&2&&(l(),a(b.isUserCreated()?2:1))},dependencies:[B,G,N,V,q,I,M,T,L,D],encapsulation:2,changeDetection:0})};export{v as default};
