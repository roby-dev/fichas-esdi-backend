import{a as le}from"./chunk-QQTAS7L5.js";import{b as ee,c as N,d as D,e as te,g as ie}from"./chunk-NDLMWJ3S.js";import{a as A}from"./chunk-XBLCLUJ3.js";import{b as F}from"./chunk-IERXHWA5.js";import{a as se,b as H}from"./chunk-REBSJAPF.js";import{a as ne,b as oe,c as ae,d as re}from"./chunk-UFO7NE4L.js";import"./chunk-3YNTNXFH.js";import{j as V,n as y}from"./chunk-D7KOQTBE.js";import{$a as h,Ab as M,F as J,Fa as b,H as q,K as Q,Ka as u,Q as d,Qa as I,Ra as v,Ta as W,Ua as c,Va as B,W as _,Wa as $,X as x,Xa as K,Y as C,Ya as o,Z as k,Za as a,_a as f,db as p,eb as l,ga as T,ha as L,ib as m,ja as g,jb as S,kb as E,nb as X,ob as Z,pb as z,t as P,va as r}from"./chunk-O3UI23AV.js";import"./chunk-2NFLSA4Y.js";var w=class t{user=g(null);setUser(i,e){let n={email:i,roles:e};this.user.set(n)}clearUser(){this.user.set(null)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})};function de(t,i){if(t&1&&m(0),t&2){let e=l();E(" Comit\xE9: ",e.committeeName()," ")}}function ce(t,i){t&1&&m(0," No hay comit\xE9 seleccionado ")}function pe(t,i){if(t&1){let e=h();o(0,"div",15)(1,"a",16),p("click",function(){_(e);let s=l();return x(s.closeDropdown())}),m(2," Configurar Comit\xE9 "),a(),o(3,"a",17),p("click",function(){_(e);let s=l();return x(s.closeDropdown())}),m(4," Configurar Locales "),a(),o(5,"button",18),p("click",function(){_(e);let s=l();return s.logout(),x(s.closeDropdown())}),m(6," Cerrar sesi\xF3n "),a()()}}var j=class t{router=d(N);committeeState=d(H);communityHallState=d(A);childrenState=d(F);userState=d(w);role=M(()=>this.userState.user()?.roles.includes("Admin")?"Administrador":"Usuario");userName=M(()=>this.userState.user().email.split("@")[0]);toggleSidebarEvent=T();committeeName=L();unreadNotifications=3;dropdownOpen=g(!1);toggleSidebar(){this.toggleSidebarEvent.emit()}toggleDropdown(){this.dropdownOpen.update(i=>!i)}closeDropdown(){this.dropdownOpen.set(!1)}logout(){localStorage.removeItem(ne),localStorage.removeItem(oe),this.committeeState.clearCommittee(),this.userState.clearUser(),this.childrenState.clearChildren(),this.communityHallState.clearCommunityHalls(),this.router.navigate(["/auth"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-header"]],inputs:{committeeName:[1,"committeeName"]},outputs:{toggleSidebarEvent:"toggleSidebarEvent"},decls:22,vars:5,consts:[[1,"h-16","flex","items-center","justify-between","px-6","border-b"],[1,"flex","items-center","space-x-4"],["aria-label","Toggle sidebar",1,"text-gray-600","hover:text-gray-900","focus:outline-none","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"text-sm","text-gray-600"],[1,"text-gray-900","font-medium"],[1,"relative",3,"keydown.escape"],["aria-label","User menu",1,"flex","items-center","focus:outline-none","cursor-pointer",3,"click"],[1,"w-8","h-8","bg-blue-500","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-sm"],[1,"hidden","md:block","ml-2","text-left"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-1","hidden","md:block","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","mt-2","w-48","bg-white","rounded-md","shadow-lg","py-1","z-50","animate-fade-in"],["routerLink","/admin/committee",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],["routerLink","/admin/community-halls",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"w-full","text-left","block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","cursor-pointer",3,"click"]],template:function(e,n){e&1&&(o(0,"header",0)(1,"div",1)(2,"button",2),p("click",function(){return n.toggleSidebar()}),C(),o(3,"svg",3),f(4,"path",4),a()(),k(),o(5,"div",5)(6,"span",6),u(7,de,1,1)(8,ce,1,0),a()()(),o(9,"div",1)(10,"div",7),p("keydown.escape",function(){return n.closeDropdown()}),o(11,"button",8),p("click",function(){return n.toggleDropdown()}),o(12,"div",9),m(13),a(),o(14,"div",10)(15,"div",11),m(16),a(),o(17,"div",12),m(18),a()(),C(),o(19,"svg",13),f(20,"path",14),a()(),u(21,pe,7,0,"div",15),a()()()),e&2&&(r(7),c(n.committeeName()?7:8),r(6),E(" ",n.userName().charAt(0)," "),r(3),S(n.userName()),r(2),S(n.role()),r(3),c(n.dropdownOpen()?21:-1))},dependencies:[y,D],encapsulation:2,changeDetection:0})};var fe=t=>({"rotate-180":t}),_e=()=>({exact:!0});function xe(t,i){t&1&&(o(0,"div",6),m(1,"Admin"),a())}function ge(t,i){if(t&1&&(o(0,"span",14),m(1),a()),t&2){let e=l(2).$implicit;r(),S(e.title)}}function Ce(t,i){if(t&1){let e=h();o(0,"li",10)(1,"a",11),p("click",function(){_(e);let s=l(2);return x(s.closeSidebar())}),C(),o(2,"svg",12),f(3,"path",13),a(),u(4,ge,2,1,"span",14),a()()}if(t&2){let e=l().$implicit,n=l();r(),v("routerLink",e.route),r(2),I("d",e.icon),r(),c(n.isCollapsed()?-1:4)}}function ve(t,i){if(t&1&&(o(0,"span",14),m(1),a()),t&2){let e=l(2).$implicit;r(),S(e.title)}}function he(t,i){if(t&1&&(C(),o(0,"svg",16),f(1,"path",18),a()),t&2){let e=l(2).$implicit;v("ngClass",Z(1,fe,e.expanded))}}function be(t,i){if(t&1){let e=h();o(0,"a",20),p("click",function(){_(e);let s=l(4);return x(s.closeSidebar())}),C(),o(1,"svg",21),f(2,"path",13),a(),k(),o(3,"span",14),m(4),a()()}if(t&2){let e=i.$implicit;v("routerLink",e.route)("routerLinkActiveOptions",X(4,_e)),r(2),I("d",e.icon),r(2),S(e.title)}}function Se(t,i){if(t&1&&(o(0,"div",17),$(1,be,5,5,"a",19,B),a()),t&2){let e=l(2).$implicit;r(),K(e.children)}}function we(t,i){if(t&1){let e=h();o(0,"li",10)(1,"button",15),p("click",function(){_(e);let s=l().$implicit,me=l();return x(me.toggleSubmenu(s))}),o(2,"div",2),C(),o(3,"svg",12),f(4,"path",13),a(),u(5,ve,2,1,"span",14),a(),u(6,he,2,3,":svg:svg",16),a(),u(7,Se,3,0,"div",17),a()}if(t&2){let e=l().$implicit,n=l();r(4),I("d",e.icon),r(),c(n.isCollapsed()?-1:5),r(),c(n.isCollapsed()?-1:6),r(),c(e.expanded&&!n.isCollapsed()?7:-1)}}function ye(t,i){if(t&1&&u(0,Ce,5,3,"li",10)(1,we,8,4,"li",10),t&2){let e=i.$implicit;c(e.children?-1:0),r(),c(e.children?1:-1)}}function ke(t,i){if(t&1&&(o(0,"div",9)(1,"a",22)(2,"div",23),m(3),a(),o(4,"div",14)(5,"p",24),m(6),a(),o(7,"p",25),m(8,"Ver perfil"),a()()()()),t&2){let e=l();r(3),E(" ",e.userName().charAt(0)," "),r(3),S(e.userName())}}var U=class t{isCollapsed=L(!1);userState=d(w);userName=M(()=>this.userState.user().email.split("@")[0]);toggleSidebarEvent=T();menuItems=g([{title:"Resumen",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",route:"dashboard"},{title:"Ni\xF1os",icon:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z",route:"children"}]);toggleSubmenu(i){i.children&&(i.expanded=!i.expanded)}closeSidebar(){this.toggleSidebarEvent.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-sidebar"]],inputs:{isCollapsed:[1,"isCollapsed"]},outputs:{toggleSidebarEvent:"toggleSidebarEvent"},decls:12,vars:2,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"h-16","flex","items-center","px-4","border-b","border-slate-700"],[1,"flex","items-center"],[1,"flex-shrink-0","w-8","h-8","bg-blue-500","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"ml-2","text-xl","font-semibold","text-white"],[1,"flex-1","overflow-y-auto","py-4"],[1,"space-y-1","px-2"],[1,"p-4","border-t","border-slate-700"],[1,"relative"],["routerLinkActive","bg-slate-700",1,"flex","items-center","px-2","py-2","text-sm","font-medium","rounded-md","hover:bg-slate-700","transition-colors",3,"click","routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5"],[1,"ml-3"],[1,"w-full","flex","items-center","justify-between","px-2","py-2","text-sm","font-medium","rounded-md","hover:bg-slate-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","transition-transform",3,"ngClass"],[1,"mt-1","pl-3","space-y-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["routerLinkActive","bg-slate-700",1,"flex","items-center","px-2","py-2","text-sm","font-medium","rounded-md","text-slate-300","hover:bg-slate-700","transition-colors",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","bg-slate-700",1,"flex","items-center","px-2","py-2","text-sm","font-medium","rounded-md","text-slate-300","hover:bg-slate-700","transition-colors",3,"click","routerLink","routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4"],["href","/profile",1,"flex","items-center"],[1,"w-8","h-8","bg-blue-500","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-sm"],[1,"text-sm","font-medium","text-white"],[1,"text-xs","text-slate-400"]],template:function(e,n){e&1&&(o(0,"aside",0)(1,"div",1)(2,"div",2)(3,"div",3),C(),o(4,"svg",4),f(5,"path",5),a()(),u(6,xe,2,0,"div",6),a()(),k(),o(7,"nav",7)(8,"ul",8),$(9,ye,2,2,null,null,B),a()(),u(11,ke,9,2,"div",9),a()),e&2&&(r(6),c(n.isCollapsed()?-1:6),r(3),K(n.menuItems()),r(2),c(n.isCollapsed()?-1:11))},dependencies:[y,V,D,ie,te],encapsulation:2,changeDetection:0})};var R=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-loading"]],decls:3,vars:0,consts:[[1,"h-dvh","w-screen","flex","items-center","justify-center","bg-white"],[1,"text-3xl","font-bold","text-blue-500","animate-pulse","drop-shadow-lg","font-sans"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"h1",1),m(2," Fichas Esdi "),a()())},encapsulation:2,changeDetection:0})};var Ee=(t,i)=>({"w-44":t,"w-16":i}),Me=(t,i)=>({"-translate-x-full":t,"translate-x-0":i});function Te(t,i){t&1&&f(0,"app-loading")}function Le(t,i){if(t&1){let e=h();o(0,"div",9),p("click",function(){_(e);let s=l(2);return x(s.closeMobileSidebar())}),a()}}function Ie(t,i){if(t&1){let e=h();f(0,"app-sidebar",1),o(1,"div",2),u(2,Le,1,0,"div",3),o(3,"div",4)(4,"app-sidebar",5),p("toggleSidebarEvent",function(){_(e);let s=l();return x(s.toggleSidebar())}),a()()(),o(5,"div",6)(6,"app-header",7),p("toggleSidebarEvent",function(){_(e);let s=l();return x(s.toggleSidebar())}),a(),o(7,"main",8),f(8,"router-outlet"),a()()}if(t&2){let e,n=l();v("isCollapsed",n.isSidebarCollapsed())("ngClass",z(6,Ee,!n.isSidebarCollapsed(),n.isSidebarCollapsed())),r(2),c(n.isMobileSidebarOpen()?2:-1),r(),v("ngClass",z(9,Me,!n.isMobileSidebarOpen(),n.isMobileSidebarOpen())),r(),v("isCollapsed",!1),r(2),v("committeeName",(e=n.committeeState.committee())==null?null:e.name)}}var Y=class t{isLoading=g(!0);isSidebarCollapsed=g(!1);isMobileSidebarOpen=g(!1);authService=d(le);commmitteeService=d(se);router=d(N);communityHallState=d(A);childrenState=d(F);committeeState=d(H);userState=d(w);toggleSidebar(){typeof window<"u"&&window.matchMedia("(max-width: 767px)").matches?this.isMobileSidebarOpen.update(e=>!e):this.isSidebarCollapsed.update(e=>!e)}closeMobileSidebar(){this.isMobileSidebarOpen.set(!1)}ngOnInit(){this.loadUser(),this.committeeState.loadCommittes().subscribe(()=>{this.isLoading.set(!1)});let i=localStorage.getItem(ae),e=localStorage.getItem(re);if(!i&&!e){this.router.navigate(["/admin/committee"]),this.isLoading.set(!1);return}this.commmitteeService.getCommitteeById(i).pipe(q(n=>this.committeeState.setCommittee(n)),J(()=>P([this.communityHallState.loadCommunityHalls(),this.childrenState.loadChildren()]))).subscribe({next:()=>this.isLoading.set(!1),error:()=>{this.router.navigate(["/admin/committee"]),this.isLoading.set(!1)}})}loadUser(){let{email:i,roles:e}=this.authService.getDecodedToken();this.userState.setUser(i,e)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["admin-layout"]],decls:3,vars:3,consts:[[1,"flex","h-dvh","bg-gray-100"],[1,"hidden","md:flex","bg-slate-800","text-white","transition-all","duration-300",3,"isCollapsed","ngClass"],[1,"md:hidden"],["aria-hidden","true",1,"fixed","inset-0","z-40","bg-black/40"],[1,"fixed","inset-y-0","left-0","z-50","transform","transition-transform","duration-300","bg-slate-800",2,"width","16rem",3,"ngClass"],[1,"h-full","bg-slate-800","text-white",3,"toggleSidebarEvent","isCollapsed"],[1,"flex","flex-col","flex-1","overflow-hidden"],[1,"bg-white","shadow-sm",3,"toggleSidebarEvent","committeeName"],[1,"flex-1","overflow-y-auto","p-4"],["aria-hidden","true",1,"fixed","inset-0","z-40","bg-black/40",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0),u(1,Te,1,0,"app-loading")(2,Ie,9,12),a()),e&2&&(W("overflow-hidden",n.isMobileSidebarOpen()),r(),c(n.isLoading()?1:2))},dependencies:[U,j,y,V,ee,R],encapsulation:2,changeDetection:0})};export{Y as default};
